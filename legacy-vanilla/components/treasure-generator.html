<div id="tab-treasure-generator" class="tab-content hidden">
    <main class="treasure-layout">
        <!-- Right Sidebar: Treasure Generator Controls -->
        <aside class="sidebar-start glass-panel">
            <h2 data-i18n="treasureGenerator.advancedTitle">🏆 מחולל אוצרות מתקדם</h2>

            <!-- Mode Tabs -->
            <div class="treasure-mode-tabs">
                <button class="treasure-mode-tab active" data-mode="monster" id="treasure-tab-monster">
                    <span class="icon">🐉</span>
                    <span data-i18n="treasureGenerator.modeMonster">מפלצת</span>
                </button>
                <button class="treasure-mode-tab" data-mode="hoard" id="treasure-tab-hoard">
                    <span class="icon">💰</span>
                    <span data-i18n="treasureGenerator.modeHoard">אוצר</span>
                </button>
                <button class="treasure-mode-tab" data-mode="shop" id="treasure-tab-shop">
                    <span class="icon">🛒</span>
                    <span data-i18n="treasureGenerator.modeShop">חנות</span>
                </button>
                <button class="treasure-mode-tab" data-mode="quest" id="treasure-tab-quest">
                    <span class="icon">🎁</span>
                    <span data-i18n="treasureGenerator.modeQuest">תגמול</span>
                </button>
            </div>

            <!-- Monster Loot Section -->
            <div id="treasure-monster-section" class="treasure-section">
                <h3 data-i18n="treasureGenerator.monsterLoot">🐲 שלל מפלצת</h3>

                <!-- Monster Type -->
                <div class="form-group">
                    <label for="monster-type" data-i18n="treasureGenerator.monsterType">סוג מפלצת</label>
                    <select id="monster-type" class="glass-input">
                        <option value="humanoid">👤 הומנואיד</option>
                        <option value="goblinoid">👺 גובלינואיד</option>
                        <option value="orc">👹 אורק</option>
                        <option value="undead">💀 אונדד</option>
                        <option value="powerfulUndead">🧛 אונדד חזק</option>
                        <option value="dragon" selected>🐉 דרקון</option>
                        <option value="giant">🗿 ענק</option>
                        <option value="beast">🐺 חיה</option>
                        <option value="fiend">😈 שד</option>
                        <option value="celestial">👼 שמימי</option>
                        <option value="elemental">🔥 יסודי</option>
                        <option value="construct">🤖 מבנה</option>
                        <option value="aberration">👁️ חריגות</option>
                        <option value="fey">🧚 פיי</option>
                        <option value="plant">🌳 צמח</option>
                        <option value="ooze">🟢 רפש</option>
                    </select>
                </div>

                <!-- CR Slider -->
                <div class="form-group">
                    <label for="monster-cr" data-i18n="treasureGenerator.challengeRating">🎯 דרגת אתגר (CR)</label>
                    <div class="slider-display">
                        <input type="range" id="monster-cr" class="slider" min="0" max="30" value="5">
                        <span class="slider-value" id="monster-cr-display">5</span>
                    </div>
                </div>

                <!-- Include Hoard -->
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="monster-include-hoard">
                    <label for="monster-include-hoard" data-i18n="treasureGenerator.includeHoard">💎 כלול אוצר נוסף
                        (מאורה)</label>
                </div>

                <!-- Include Coins -->
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="monster-include-coins" checked>
                    <label for="monster-include-coins" data-i18n="treasureGenerator.includeCoins">💰 כלול מטבעות</label>
                </div>

                <!-- Generate Button -->
                <button type="button" id="generate-monster-loot-btn" class="btn-create treasure-btn">
                    <span class="icon">🎲</span>
                    <span data-i18n="treasureGenerator.generateLoot">צור שלל</span>
                </button>
            </div>

            <!-- Hoard Section -->
            <div id="treasure-hoard-section" class="treasure-section hidden">
                <h3 data-i18n="treasureGenerator.treasureHoard">💰 אוצר מלא (DMG)</h3>

                <!-- CR Range -->
                <div class="form-group">
                    <label for="hoard-cr-range" data-i18n="treasureGenerator.crRange">טווח CR</label>
                    <select id="hoard-cr-range" class="glass-input">
                        <option value="CR_0_4">CR 0-4 (Common/Uncommon)</option>
                        <option value="CR_5_10" selected>CR 5-10 (Uncommon/Rare)</option>
                        <option value="CR_11_16">CR 11-16 (Rare/Very Rare)</option>
                        <option value="CR_17_PLUS">CR 17+ (Very Rare/Legendary)</option>
                    </select>
                </div>

                <div class="info-box">
                    <p data-i18n="treasureGenerator.hoardInfo">
                        🏆 אוצר מלא כולל: מטבעות, אבני חן, חפצי אמנות וחפצים קסומים לפי טבלאות DMG הרשמיות.
                    </p>
                </div>

                <!-- Generate Button -->
                <button type="button" id="generate-hoard-btn" class="btn-create treasure-btn">
                    <span class="icon">💰</span>
                    <span data-i18n="treasureGenerator.generateHoard">צור אוצר</span>
                </button>
            </div>

            <!-- Shop Section -->
            <div id="treasure-shop-section" class="treasure-section hidden">
                <h3 data-i18n="treasureGenerator.shopInventory">🛒 מלאי חנות</h3>

                <!-- Shop Type -->
                <div class="form-group">
                    <label for="shop-type" data-i18n="treasureGenerator.shopType">סוג חנות</label>
                    <select id="shop-type" class="glass-input">
                        <optgroup label="נשק ושריון">
                            <option value="blacksmith" selected>⚒️ נפח</option>
                            <option value="weaponsmith">⚔️ נשק</option>
                            <option value="armorsmith">🛡️ שריינאי</option>
                        </optgroup>
                        <optgroup label="קסם">
                            <option value="alchemist">⚗️ אלכימאי</option>
                            <option value="arcaneShop">🔮 אמפוריון קסמים</option>
                            <option value="scrollShop">📜 סופר מגילות</option>
                        </optgroup>
                        <optgroup label="כללי">
                            <option value="generalStore">🏪 מכולת</option>
                            <option value="tavern">🍺 פונדק</option>
                            <option value="jeweler">💎 צורף</option>
                            <option value="temple">⛪ מקדש</option>
                            <option value="stables">🐴 אורוות</option>
                            <option value="herbalist">🌿 צמחונאי</option>
                        </optgroup>
                        <optgroup label="מיוחד">
                            <option value="blackMarket">🗡️ שוק שחור</option>
                            <option value="fenceShop">🔑 חנות עבוט</option>
                            <option value="exoticTrader">🏺 סוחר אקזוטי</option>
                            <option value="magicalMenagerie">🦉 גן חיות קסום</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Settlement Tier -->
                <div class="form-group">
                    <label for="shop-tier" data-i18n="treasureGenerator.settlementTier">גודל יישוב</label>
                    <select id="shop-tier" class="glass-input">
                        <option value="village">🏘️ כפר (Common בלבד)</option>
                        <option value="town" selected>🏠 עיירה (עד Uncommon)</option>
                        <option value="city">🏙️ עיר (עד Rare)</option>
                        <option value="metropolis">🌆 מטרופולין (עד Very Rare)</option>
                    </select>
                </div>

                <!-- Include Merchant -->
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="shop-include-merchant" checked>
                    <label for="shop-include-merchant" data-i18n="treasureGenerator.includeMerchant">👤 צור סוחר
                        NPC</label>
                </div>

                <!-- Generate Button -->
                <button type="button" id="generate-shop-btn" class="btn-create treasure-btn">
                    <span class="icon">🛒</span>
                    <span data-i18n="treasureGenerator.generateShop">צור מלאי</span>
                </button>
            </div>

            <!-- Quest Reward Section -->
            <div id="treasure-quest-section" class="treasure-section hidden">
                <h3 data-i18n="treasureGenerator.questReward">🎁 תגמול קווסט</h3>

                <!-- Party Level -->
                <div class="form-group">
                    <label for="quest-party-level" data-i18n="treasureGenerator.partyLevel">רמת הקבוצה</label>
                    <div class="slider-display">
                        <input type="range" id="quest-party-level" class="slider" min="1" max="20" value="5">
                        <span class="slider-value" id="quest-party-level-display">5</span>
                    </div>
                </div>

                <!-- Quest Difficulty -->
                <div class="form-group">
                    <label for="quest-difficulty" data-i18n="treasureGenerator.questDifficulty">קושי הקווסט</label>
                    <select id="quest-difficulty" class="glass-input">
                        <option value="easy">🟢 קל (Side Quest)</option>
                        <option value="medium" selected>🟡 בינוני (Standard)</option>
                        <option value="hard">🟠 קשה (Major Quest)</option>
                        <option value="deadly">🔴 מסוכן (Campaign Goal)</option>
                    </select>
                </div>

                <!-- Gold Reward -->
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="quest-include-gold" checked>
                    <label for="quest-include-gold" data-i18n="treasureGenerator.includeGoldReward">💰 כלול
                        תשלום</label>
                </div>

                <!-- Generate Button -->
                <button type="button" id="generate-quest-btn" class="btn-create treasure-btn">
                    <span class="icon">🎁</span>
                    <span data-i18n="treasureGenerator.generateReward">צור תגמול</span>
                </button>
            </div>

            <!-- Global Options -->
            <div class="treasure-options-section">
                <h4 data-i18n="treasureGenerator.advancedOptions">⚙️ אפשרויות מתקדמות</h4>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="treasure-cursed-items">
                    <label for="treasure-cursed-items" data-i18n="treasureGenerator.allowCursed">☠️ אפשר חפצים
                        מקוללים</label>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="treasure-surprise">
                    <label for="treasure-surprise" data-i18n="treasureGenerator.surpriseMode">🎁 הפתעה (פריט גבוה
                        יותר)</label>
                </div>

                <!-- Theme Filter -->
                <div class="form-group">
                    <label for="treasure-theme" data-i18n="treasureGenerator.themeFilter">🎨 נושא (אופציונלי)</label>
                    <select id="treasure-theme" class="glass-input">
                        <option value="">ללא סינון</option>
                        <option value="fire">🔥 אש</option>
                        <option value="ice">❄️ קרח</option>
                        <option value="lightning">⚡ ברק</option>
                        <option value="nature">🌿 טבע</option>
                        <option value="shadow">🌑 צל</option>
                        <option value="radiant">✨ אור</option>
                        <option value="necrotic">💀 נקרוטי</option>
                    </select>
                </div>
            </div>

            <!-- Generation Status -->
            <div id="treasure-generation-status" class="status-message hidden">
                <div class="spinner-small"></div>
                <span id="treasure-status-text">יוצר אוצר...</span>
            </div>
        </aside>

        <!-- Center: Treasure Preview -->
        <section class="treasure-preview-area glass-panel">
            <div class="treasure-preview-header">
                <h3 data-i18n="treasureGenerator.preview">תצוגה מקדימה</h3>
                <div id="treasure-total-value" class="total-value hidden">
                    <span class="label">סה"כ:</span>
                    <span class="value" id="treasure-value-amount">0</span>
                    <span class="currency">gp</span>
                </div>
            </div>

            <!-- Coins Display -->
            <div id="treasure-coins-display" class="coins-display hidden">
                <div class="coin-stack" id="coin-cp" title="Copper Pieces">
                    <span class="coin-icon">🟤</span>
                    <span class="coin-amount">0</span>
                    <span class="coin-label">cp</span>
                </div>
                <div class="coin-stack" id="coin-sp" title="Silver Pieces">
                    <span class="coin-icon">⚪</span>
                    <span class="coin-amount">0</span>
                    <span class="coin-label">sp</span>
                </div>
                <div class="coin-stack" id="coin-ep" title="Electrum Pieces">
                    <span class="coin-icon">🔵</span>
                    <span class="coin-amount">0</span>
                    <span class="coin-label">ep</span>
                </div>
                <div class="coin-stack" id="coin-gp" title="Gold Pieces">
                    <span class="coin-icon">🟡</span>
                    <span class="coin-amount">0</span>
                    <span class="coin-label">gp</span>
                </div>
                <div class="coin-stack" id="coin-pp" title="Platinum Pieces">
                    <span class="coin-icon">💎</span>
                    <span class="coin-amount">0</span>
                    <span class="coin-label">pp</span>
                </div>
            </div>

            <!-- Gems and Art Display -->
            <div id="treasure-gems-art" class="gems-art-display hidden">
                <h4>💎 אבני חן וחפצי אמנות</h4>
                <div class="gems-art-grid" id="gems-art-grid">
                    <!-- Gems and art objects will appear here -->
                </div>
            </div>

            <!-- Cards Grid -->
            <div id="treasure-cards-grid" class="treasure-cards-grid">
                <!-- Generated cards will appear here -->
                <div class="empty-treasure-message">
                    <span class="icon">🎲</span>
                    <p data-i18n="treasureGenerator.noTreasureYet">בחר מצב ולחץ על הכפתור כדי להתחיל</p>
                </div>
            </div>

            <!-- Merchant NPC Card -->
            <div id="merchant-npc-card" class="merchant-card hidden">
                <h4>👤 סוחר</h4>
                <div class="merchant-info">
                    <div class="merchant-name" id="merchant-name"></div>
                    <div class="merchant-race" id="merchant-race"></div>
                    <div class="merchant-personality" id="merchant-personality"></div>
                    <div class="merchant-quirk" id="merchant-quirk"></div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="treasure-actions hidden" id="treasure-actions">
                <button type="button" id="save-all-to-gallery-btn" class="btn-primary">
                    <span class="icon">💾</span>
                    <span data-i18n="treasureGenerator.saveAllToGallery">שמור הכל לגלריה</span>
                </button>
                <button type="button" id="clear-treasure-btn" class="btn-secondary">
                    <span class="icon">🗑️</span>
                    <span data-i18n="treasureGenerator.clear">נקה</span>
                </button>
            </div>
        </section>
    </main>
</div>