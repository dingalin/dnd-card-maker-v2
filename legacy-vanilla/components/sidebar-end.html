<aside class="sidebar-end glass-panel">
    <h2 data-i18n="editSidebar.title">×¢×¨×™×›×” ×•×¢×™×¦×•×‘</h2>

    <!-- Accordion-style menu with content under each button -->
    <div id="sidebar-end-scroll-area" class="no-scrollbar-style accordion-menu">

        <!-- 1. Edit Content Accordion Item -->
        <div class="accordion-item">
            <div class="stone-btn accordion-header" data-target="edit-content">
                <div class="btn-content">
                    <img src="assets/icons/icon-edit.png" class="icon-img" alt="Edit">
                    <span class="label" data-i18n="editSidebar.editContent">×¢×¨×™×›×ª ×ª×•×›×Ÿ</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
            </div>
            <div id="edit-content" class="accordion-content hidden">
                <!-- ===== FRONT SIDE CONTROLS ===== -->
                <div id="front-controls" class="space-y-4">
                    <h4 class="text-amber-400 text-sm font-bold border-b border-amber-600 pb-1 mb-3"
                        data-i18n="editContent.frontSide">×¦×“ ×§×“××™</h4>

                    <!-- 1. Rarity (Top) -->
                    <div class="control-group">
                        <label for="edit-rarity" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.rarity">1. × ×“×™×¨×•×ª</label>
                        <div class="flex gap-2 items-center mb-2">
                            <input type="text" id="edit-rarity"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white">
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="raritySize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="raritySize-display">24px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="raritySize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-rarity"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-rarity"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-rarity"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×¦×œ">
                                    <input type="checkbox" id="style-shadow-rarity"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-gray-400">S</span>
                                </label>
                            </div>
                        </div>
                        <label for="rarity-offset" class="text-xs text-gray-400"
                            data-i18n="editContent.position">Position
                            (height):</label>
                        <input type="range" id="rarity-offset" min="-100" max="200" value="50" class="flex-1">
                        <div class="flex items-center gap-2 mt-1">
                            <label for="rarity-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="rarity-width" min="100" max="800" value="500" class="flex-1">
                        </div>
                    </div>

                    <!-- 2. Type -->
                    <div class="control-group">
                        <label for="edit-type" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.type">2. ×¡×•×’</label>
                        <div class="flex gap-2 items-center mb-2">
                            <input type="text" id="edit-type"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white">
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="typeSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="typeSize-display">24px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="typeSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-type"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-type"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-type"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×¦×œ">
                                    <input type="checkbox" id="style-shadow-type"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-gray-400">S</span>
                                </label>
                            </div>
                        </div>
                        <label for="type-offset" class="text-xs text-gray-400" data-i18n="editContent.position">Position
                            (height):</label>
                        <input type="range" id="type-offset" min="-100" max="200" value="71" class="flex-1">
                        <div class="flex items-center gap-2 mt-1">
                            <label for="type-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="type-width" min="200" max="700" value="450" class="flex-1">
                        </div>
                    </div>

                    <!-- 3. Name -->
                    <div class="control-group">
                        <label for="edit-name" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.name">3. ×©× ×”×—×¤×¥</label>
                        <div class="flex gap-2 items-center mb-2">
                            <input type="text" id="edit-name"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white">
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="nameSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="nameSize-display">60px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="nameSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-name"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-name"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-name"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×¦×œ">
                                    <input type="checkbox" id="style-shadow-name"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-gray-400">S</span>
                                </label>
                            </div>
                        </div>
                        <label for="name-offset" class="text-xs text-gray-400" data-i18n="editContent.position">Position
                            (height):</label>
                        <input type="range" id="name-offset" min="-100" max="200" value="80" class="flex-1">
                        <div class="flex items-center gap-2 mt-1">
                            <label for="name-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="name-width" min="100" max="800" value="450" class="flex-1">
                        </div>
                    </div>

                    <!-- 4. Core Stats (Damage / AC) -->
                    <div class="control-group">
                        <label for="edit-core-stats" class="text-sm font-bold text-amber-500 mb-1 block"
                            data-i18n="editContent.coreStats">4. Damage / AC (Bold)</label>
                        <div class="flex gap-2 items-center mb-2">
                            <input type="text" id="edit-core-stats" placeholder="×œ×“×•×’××”: 1d8 ××©×•×¤×¨"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white">
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="coreStatsSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="coreStatsSize-display">42px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="coreStatsSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-coreStats" checked
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-coreStats"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-coreStats"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×¦×œ">
                                    <input type="checkbox" id="style-shadow-coreStats"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-gray-400">S</span>
                                </label>
                            </div>
                        </div>
                        <label for="coreStats-offset" class="text-xs text-gray-400"
                            data-i18n="editContent.position">Position (height):</label>
                        <input type="range" id="coreStats-offset" min="600" max="1350" value="893" class="flex-1">
                        <div class="flex items-center gap-2 mt-1">
                            <label for="coreStats-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="coreStats-width" min="100" max="800" value="537" class="flex-1">
                        </div>
                    </div>

                    <!-- 5. Quick Description (Bottom) -->
                    <div class="control-group">
                        <label for="edit-quick-stats" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.quickDesc">5. Quick Description</label>
                        <div class="flex gap-2 items-start mb-2">
                            <textarea id="edit-quick-stats" placeholder="×œ×“×•×’××”: ×—×¨×‘ ×–×• ×–×•×”×¨×ª ×‘×—×•×©×š" rows="2"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white"></textarea>
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="statsSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="statsSize-display">36px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="statsSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-stats" checked
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-stats"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-stats"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×¦×œ">
                                    <input type="checkbox" id="style-shadow-stats"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-gray-400">S</span>
                                </label>
                            </div>
                        </div>
                        <label for="stats-offset" class="text-xs text-gray-400"
                            data-i18n="editContent.position">Position
                            (height):</label>
                        <input type="range" id="stats-offset" min="600" max="1350" value="969" class="flex-1">
                        <div class="flex items-center gap-2 mt-1">
                            <label for="stats-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="stats-width" min="100" max="800" value="450" class="flex-1">
                        </div>
                    </div>

                    <!-- 6. Gold -->
                    <div class="control-group">
                        <label for="edit-gold" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.price">6. Price (Gold)</label>
                        <div class="flex gap-2 items-center mb-2">
                            <input type="text" id="edit-gold" value="400"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white">
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="goldSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="goldSize-display">24px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="goldSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-gold"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-gold"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-gold"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×¦×œ">
                                    <input type="checkbox" id="style-shadow-gold"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-gray-400">S</span>
                                </label>
                            </div>
                        </div>
                        <label for="gold-offset" class="text-xs text-gray-400" data-i18n="editContent.position">Position
                            (height):</label>
                        <input type="range" id="gold-offset" min="0" max="480" value="111" class="flex-1">
                        <div class="flex items-center gap-2 mt-1">
                            <label for="gold-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="gold-width" min="100" max="800" value="500" class="flex-1">
                        </div>
                    </div>
                </div>

                <!-- ===== BACK SIDE CONTROLS ===== -->
                <div id="back-controls" class="space-y-4 hidden">
                    <h4 class="text-amber-400 text-sm font-bold border-b border-amber-600 pb-1 mb-3"
                        data-i18n="editContent.backSide">×¦×“ ××—×•×¨×™</h4>

                    <!-- Ability Name -->
                    <div class="control-group">
                        <label for="edit-ability-name" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.abilityName">×©× ×™×›×•×œ×ª</label>
                        <div class="flex gap-2 items-center mb-2">
                            <input type="text" id="edit-ability-name"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white">
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="abilityNameSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="abilityNameSize-display">62px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="abilityNameSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-abilityName" checked
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-abilityName"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-abilityName"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <label for="ability-offset" class="text-xs text-gray-400"
                                data-i18n="editContent.positionLabel">Position:</label>
                            <input type="range" id="ability-offset" min="50" max="300" value="220" class="flex-1">
                        </div>
                    </div>

                    <!-- Mechanics (Ability Desc) -->
                    <div class="control-group">
                        <label for="edit-ability-desc" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.mechanics">××›× ×™×§×”</label>
                        <div class="flex gap-2 items-start mb-2">
                            <textarea id="edit-ability-desc" rows="3"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white"></textarea>
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0 mt-1">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="mechSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="mechSize-display">50px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="mechSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0 mt-1">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-mech"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-mech"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-mech"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <label for="mech-offset" class="text-xs text-gray-400"
                                data-i18n="editContent.positionLabel">Position:</label>
                            <input type="range" id="mech-offset" min="100" max="500" value="320" class="flex-1">
                        </div>
                        <div class="flex items-center gap-2 mt-2">
                            <label for="ability-width" class="text-xs text-gray-400"
                                data-i18n="editContent.textWidth">Text
                                Width:</label>
                            <input type="range" id="ability-width" min="100" max="800" value="600" class="flex-1">
                        </div>
                    </div>

                    <!-- Lore (Fluff) -->
                    <div class="control-group">
                        <label for="edit-desc" class="text-sm font-medium text-gray-300 mb-1 block"
                            data-i18n="editContent.lore">×¨×§×¢ ×•×¡×™×¤×•×¨ (×œ×•×¨)</label>
                        <div class="flex gap-2 items-start mb-2">
                            <textarea id="edit-desc" rows="3"
                                class="flex-1 bg-gray-700 border border-gray-600 rounded p-2 text-white"></textarea>
                            <div class="flex items-center gap-1 bg-gray-800 rounded px-2 py-0.5 shrink-0 mt-1">
                                <button type="button" class="font-btn font-decrease text-gray-400 hover:text-white"
                                    data-target="loreSize">-</button>
                                <span class="font-value text-xs w-8 text-center text-white"
                                    id="loreSize-display">46px</span>
                                <button type="button" class="font-btn font-increase text-gray-400 hover:text-white"
                                    data-target="loreSize">+</button>
                            </div>
                            <div class="flex flex-col gap-1 shrink-0 mt-1">
                                <label class="flex items-center gap-1 cursor-pointer" title="××•×“×’×©">
                                    <input type="checkbox" id="style-bold-lore"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs font-bold text-gray-400">B</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="×”×™×œ×”">
                                    <input type="checkbox" id="style-glow-lore"
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs text-yellow-400" style="text-shadow: 0 0 2px #fcd34d;">H</span>
                                </label>
                                <label class="flex items-center gap-1 cursor-pointer" title="× ×˜×•×™">
                                    <input type="checkbox" id="style-italic-lore" checked
                                        class="accent-amber-500 w-4 h-4 rounded-sm bg-gray-700 border-gray-600">
                                    <span class="text-xs italic text-gray-400">I</span>
                                </label>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <label for="lore-offset" class="text-xs text-gray-400"
                                data-i18n="editContent.positionLabel">Position:</label>
                            <input type="range" id="lore-offset" min="400" max="1200" value="1100" class="flex-1">
                        </div>
                        <div class="flex items-center gap-2 mt-1">
                            <label for="lore-width" class="text-xs text-gray-400"
                                data-i18n="editContent.width">Width:</label>
                            <input type="range" id="lore-width" min="100" max="800" value="550" class="flex-1">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Text Design Accordion Item -->
        <div class="accordion-item">
            <div class="stone-btn accordion-header" data-target="text-design">
                <div class="btn-content">
                    <span class="icon">ğŸ¨</span>
                    <span class="label" data-i18n="editSidebar.textDesign">×¢×™×¦×•×‘ ×˜×§×¡×˜</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
            </div>
            <div id="text-design" class="accordion-content hidden">
                <div class="control-group">
                    <label for="font-family-select" data-i18n="textDesign.fontLabel">×’×•×¤×Ÿ</label>
                    <select id="font-family-select">
                        <option value="Heebo" data-i18n="textDesign.fonts.heebo">Heebo (Regular)</option>
                        <option value="Rubik" data-i18n="textDesign.fonts.rubik">Rubik (Rounded)</option>
                        <option value="Frank Ruhl Libre" data-i18n="textDesign.fonts.frank">Frank Ruhl (Literary)
                        </option>
                        <option value="Assistant" data-i18n="textDesign.fonts.assistant">Assistant (Clean)</option>
                    </select>
                </div>

                <!-- Text Backdrop Controls -->
                <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700 mt-4">
                    <div class="flex items-center gap-2 mb-2">
                        <input type="checkbox" id="text-backdrop-enabled" class="accent-amber-500 w-4 h-4">
                        <label for="text-backdrop-enabled" class="text-sm font-bold" style="color: #fbbf24;">×¨×§×¢ ×œ×˜×§×¡×˜
                            (Backdrop)</label>
                    </div>
                    <div id="text-backdrop-controls" class="hidden">
                        <div class="flex justify-between text-xs text-gray-400 mb-1">
                            <span>×©×§×™×¤×•×ª (Opacity)</span>
                            <span id="text-backdrop-opacity-val">50%</span>
                        </div>
                        <input type="range" id="text-backdrop-opacity" min="0" max="100" value="50" class="w-full">
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Image Tuning Accordion Item -->
        <div class="accordion-item">
            <div class="stone-btn accordion-header" data-target="image-tuning">
                <div class="btn-content">
                    <span class="icon">ğŸ–¼ï¸</span>
                    <span class="label" data-i18n="editSidebar.imageTuning">×›×™×•×•× ×•×Ÿ ×ª××•× ×”</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
            </div>
            <div id="image-tuning" class="accordion-content hidden">
                <!-- Global Margin Controls -->
                <div class="control-group bg-gray-800 p-3 rounded-lg border border-amber-600 mb-4">
                    <label class="block text-sm font-bold mb-3" style="color: #fbbf24;"
                        data-i18n="imageTuning.globalMargin">
                    </label>

                    <!-- Lock checkbox -->
                    <div class="flex items-center gap-2 mb-3">
                        <input type="checkbox" id="global-margin-lock" checked class="accent-amber-500 w-4 h-4">
                        <label for="global-margin-lock" class="text-xs text-gray-300 cursor-pointer"
                            data-i18n="imageTuning.lockRatio">
                        </label>
                    </div>

                    <!-- Height (Vertical) Slider -->
                    <div class="mb-3">
                        <div class="flex justify-between text-xs text-gray-400 mb-1">
                            <span data-i18n="imageTuning.verticalShrink">â†•ï¸ Vertical Shrink</span>
                            <span id="global-margin-y-val">0</span>
                        </div>
                        <input type="range" id="global-margin-y" min="-100" max="100" value="6" class="w-full">
                    </div>

                    <!-- Width (Horizontal) Slider -->
                    <div>
                        <div class="flex justify-between text-xs text-gray-400 mb-1">
                            <span data-i18n="imageTuning.horizontalShrink">â†”ï¸ Horizontal Shrink</span>
                            <span id="global-margin-x-val">0</span>
                        </div>
                        <input type="range" id="global-margin-x" min="-100" max="100" value="6" class="w-full">
                    </div>
                </div>

                <!-- Auto Layout Button -->
                <div class="mb-4">
                    <button id="auto-layout-btn" class="btn-primary w-full"
                        style="background: linear-gradient(135deg, #8b5cf6, #6366f1); border-color: #7c3aed;">
                        <span data-i18n="imageTuning.autoLayout">âœ¨ Auto Layout</span>
                    </button>
                </div>

                <div class="layout-controls space-y-4">
                    <!-- Image Offset -->
                    <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700">
                        <label for="image-offset" class="block text-sm font-bold mb-2" style="color: #fbbf24;"
                            data-i18n="imageTuning.imagePosition">Image Position</label>
                        <input type="range" id="image-offset" min="-150" max="150" value="0" class="w-full">
                    </div>

                    <!-- Zoom -->
                    <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700">
                        <label for="image-scale" class="block text-sm font-bold mb-2"
                            style="color: #fbbf24; display: flex; justify-content: space-between;">
                            <span data-i18n="imageTuning.zoom">Zoom</span>
                            <span id="image-scale-val">1.0</span>
                        </label>
                        <input type="range" id="image-scale" min="0.5" max="2.0" step="0.1" value="0.8" class="w-full">
                    </div>

                    <!-- Rotation -->
                    <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700">
                        <label for="image-rotation" class="block text-sm font-bold mb-2"
                            style="color: #fbbf24; display: flex; justify-content: space-between;">
                            <span data-i18n="imageTuning.rotation">Rotation</span>
                            <span id="image-rotation-val">0Â°</span>
                        </label>
                        <input type="range" id="image-rotation" min="-180" max="180" step="5" value="0" class="w-full">
                    </div>

                    <!-- Fade (Vignette) -->
                    <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700">
                        <label for="image-fade" class="block text-sm font-bold mb-2"
                            style="color: #fbbf24; display: flex; justify-content: space-between;">
                            <span data-i18n="imageTuning.fade">Frame Fade</span>
                            <span id="image-fade-val">0</span>
                        </label>
                        <input type="range" id="image-fade" min="0" max="100" value="100" class="w-full">
                    </div>

                    <!-- Shadow (Drop Shadow) -->
                    <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700">
                        <label for="image-shadow" class="block text-sm font-bold mb-2"
                            style="color: #fbbf24; display: flex; justify-content: space-between;">
                            <span data-i18n="imageTuning.shadow">Shadow</span>
                            <span id="image-shadow-val">0</span>
                        </label>
                        <input type="range" id="image-shadow" min="0" max="100" value="78" class="w-full">
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Card Background Accordion Item -->
        <div class="accordion-item">
            <div class="stone-btn accordion-header" data-target="card-background">
                <div class="btn-content">
                    <span class="icon">ğŸ´</span>
                    <span class="label" data-i18n="editSidebar.cardBackground">×¨×§×¢ ×”×§×œ×£</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
            </div>
            <div id="card-background" class="accordion-content hidden">
                <div class="control-group">
                    <label for="bg-theme-select" data-i18n="cardBackground.themeLabel">× ×•×©× ×”×¨×§×¢</label>
                    <select id="bg-theme-select"
                        class="w-full bg-gray-700 border border-gray-600 rounded p-2 text-white mb-3">
                        <optgroup label="×™×¡×•×“×•×ª ×§×œ××¡×™×™×">
                            <option value="Fire">ğŸ”¥ ××© (Fire)</option>
                            <option value="Ice">â„ï¸ ×§×¨×— (Ice)</option>
                            <option value="Lightning">âš¡ ×‘×¨×§ (Lightning)</option>
                            <option value="Nature">ğŸŒ¿ ×˜×‘×¢ (Nature)</option>
                            <option value="Ocean">ğŸŒŠ ×™× (Ocean)</option>
                        </optgroup>
                        <optgroup label="×§×¡× ×•×¨×•×—× ×™×•×ª">
                            <option value="Arcane">âœ¨ ×§×¡× (Arcane)</option>
                            <option value="Divine">ğŸ‘¼ ×§×“×•×©×” (Divine)</option>
                            <option value="Necrotic">ğŸ’€ ××•×•×ª (Necrotic)</option>
                            <option value="Shadow">ğŸŒ‘ ×¦×œ (Shadow)</option>
                            <option value="Celestial">ğŸŒŸ ×©××™××™ (Celestial)</option>
                        </optgroup>
                        <optgroup label="×—×•××¨×™× ×•×¡×’× ×•× ×•×ª">
                            <option value="Industrial">âš™ï¸ ×ª×¢×©×™×™×ª×™ (Industrial)</option>
                            <option value="Iron">ğŸ—¡ï¸ ×‘×¨×–×œ (Iron)</option>
                            <option value="Blood">ğŸ©¸ ×“× (Blood)</option>
                            <option value="Old Scroll">ğŸ“œ ××’×™×œ×” (Scroll)</option>
                            <option value="Elemental">ğŸŒˆ ×™×¡×•×“×•×ª (Elemental)</option>
                        </optgroup>
                    </select>

                    <!-- Card Style Select (same styles as image generation) -->
                    <label for="bg-style-select" data-i18n="cardBackground.styleLabel">×¡×’× ×•×Ÿ ×”×§×œ×£</label>
                    <select id="bg-style-select"
                        class="w-full bg-gray-700 border border-gray-600 rounded p-2 text-white mb-3">
                        <optgroup label="×¨×¦×™× ×™ ×•×§×œ××¡×™">
                            <option value="watercolor">ğŸ¨ ×¦×‘×¢×™ ××™× (Watercolor)</option>
                            <option value="oil">ğŸ–¼ï¸ ×¦×™×•×¨ ×©××Ÿ (Oil Painting)</option>
                            <option value="realistic">ğŸ“· ×¨×™××œ×™×¡×˜×™ (Realistic)</option>
                            <option value="sketch">âœï¸ ×¨×™×©×•× ×¢×™×¤×¨×•×Ÿ (Sketch)</option>
                        </optgroup>
                        <optgroup label="×¤× ×˜×–×™×” ×•××•×× ×•×ª">
                            <option value="dark_fantasy">ğŸ° ×¤× ×˜×–×™×” ××¤×œ×” (Dark Fantasy)</option>
                            <option value="epic_fantasy">ğŸ“œ ×ª×—×¨×™×˜ ×¢×ª×™×§ (Epic Fantasy)</option>
                            <option value="anime">ğŸŒ ×× ×™××” (Anime)</option>
                            <option value="stained_glass">ğŸªŸ ×•×™×˜×¨××–' (Stained Glass)</option>
                        </optgroup>
                        <optgroup label="××•×“×¨× ×™ ×•×™×™×—×•×“×™">
                            <option value="pixel">ğŸ‘¾ ×¤×™×§×¡×œ ××¨×˜ (Pixel Art)</option>
                            <option value="ink_drawing">âœ’ï¸ ×“×™×• ×‘×™×“ (Ink Drawing)</option>
                            <option value="simple_icon">ğŸ¯ ××™×™×§×•×Ÿ ×©×˜×•×— (Flat Icon)</option>
                            <option value="silhouette">ğŸ›ï¸ ×¦×œ×œ×™×ª ×”×¨×œ×“×™×ª (Heraldic)</option>
                            <option value="synthwave">ğŸ’œ ×¡×™× ×ª'×•×™×™×‘ (Synthwave)</option>
                        </optgroup>
                    </select>

                    <!-- Model Select for Background -->
                    <label for="bg-model-select">××•×“×œ AI</label>
                    <select id="bg-model-select"
                        class="w-full bg-gray-700 border border-gray-600 rounded p-2 text-white mb-3">
                        <option value="getimg-flux">âš¡ FLUX Schnell (××”×™×¨)</option>
                        <option value="getimg-zimage">ğŸ¨ Z-Image Turbo (××™×›×•×ª ×’×‘×•×”×”)</option>
                    </select>

                    <button id="generate-bg-btn" class="btn-primary w-full mb-2" data-i18n="cardBackground.generate">×¦×•×¨
                        ×¨×§×¢</button>
                    <button id="reset-bg-btn" class="btn-primary w-full" data-i18n="cardBackground.reset">×—×–×•×¨ ×œ×‘×¨×™×¨×ª
                        ××—×“×œ</button>

                    <!-- Ready-made Backgrounds -->
                    <button id="ready-made-bg-btn" class="btn-primary w-full mt-2">
                        <span class="icon">ğŸ–¼ï¸</span> <span data-i18n="cardBackground.readyMadeLabel">Ready-Made
                            Backgrounds</span>
                    </button>
                </div>

                <!-- Background Controls -->
                <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700 mt-2">
                    <label for="bg-scale" class="block text-sm font-bold mb-2"
                        style="color: #fbbf24; display: flex; justify-content: space-between;">
                        <span data-i18n="cardBackground.scale">Background Scale</span>
                        <span id="bg-scale-val">1.0</span>
                    </label>
                    <input type="range" id="bg-scale" min="1.0" max="2.0" step="0.1" value="1.0" class="w-full">
                </div>

                <!-- Center Fade Controls -->
                <div class="control-group bg-gray-800 p-3 rounded-lg border border-gray-700 mt-2">
                    <label for="center-fade" class="block text-sm font-bold mb-2"
                        style="color: #fbbf24; display: flex; justify-content: space-between;">
                        <span data-i18n="cardBackground.centerFade">×”×‘×”×¨×ª ××¨×›×–</span>
                        <span id="center-fade-val">0</span>
                    </label>
                    <input type="range" id="center-fade" min="0" max="100" step="5" value="0" class="w-full">
                    <p class="text-xs text-gray-400 mt-1" data-i18n="cardBackground.centerFadeHint">×¤×™×™×“ ×©×× ×ª ××”××¨×›×–
                        ×œ×©×™×¤×•×¨
                        ×§×¨×™××•×ª</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Fixed Footer Actions -->
    <div class="sidebar-actions-footer">
        <button id="save-gallery-btn" class="btn-primary" style="flex: 1;" disabled>
            <span class="icon">ğŸ’¾</span> <span data-i18n="footer.saveToGallery">×©××•×¨ ×œ×’×œ×¨×™×”</span>
        </button>
        <button id="download-btn" class="btn-secondary" style="flex: 1;" disabled>
            <span class="icon">ğŸ“¥</span> <span data-i18n="footer.download">×”×•×¨×“</span>
        </button>
    </div>

    <!-- Background Selection Panel (Overlay in Sidebar) -->
    <div id="bg-selection-modal" class="sidebar-overlay-panel hidden">
        <div class="panel-header">
            <h3 data-i18n="cardBackground.selectTitle">×‘×—×¨ ×¨×§×¢ ××•×›×Ÿ</h3>
            <button id="close-bg-modal" class="close-btn">&times;</button>
        </div>

        <div class="modal-body" style="flex: 1; overflow-y: auto; padding: 1rem;">
            <!-- Categories/Themes -->
            <div id="bg-themes-container" style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
                <!-- Theme buttons injected here -->
            </div>

            <!-- Grid Display -->
            <div id="bg-grid-display" style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 0.5rem;">
                <!-- Sliced images injected here -->
            </div>
        </div>
    </div>
</aside>